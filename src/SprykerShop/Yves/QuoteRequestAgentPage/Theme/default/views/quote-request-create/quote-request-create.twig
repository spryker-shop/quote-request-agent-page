{% extends template('page-layout-quote-request', 'QuoteRequestAgentPage') %}

{% define data = {
    title: 'quote_request_page.quote_request' | trans,
    quoteRequestCreateForm: _view.quoteRequestCreateForm,
    impersonatedCustomer: _view.impersonatedCustomer,
} %}

{% block breadcrumbs %}
    {% include molecule('breadcrumb') with {
        data: {
            steps: [
                {
                    label: 'agent.account.page_title' | trans,
                    url: path('agent/overview'),
                },
                {
                    label: 'quote_request_page.quote_request' | trans,
                    url: path('agent/quote-request'),
                },
                {
                    label: 'quote_request_page.quote_request.create' | trans,
                }
            ]
        }
    } only %}
{% endblock %}

{% block agentContent %}

    <div class="box">
        {{ form_start(data.quoteRequestCreateForm) }}

        <div class="grid">
            <div class="col col--sm-12 col--md-12">
                <label>{{ 'quote_request_agent_widget.form.select_customer' | trans }}:</label>
                {% include molecule('autocomplete-form') with {
                    data: {
                        id: 'agent-company-user',
                        suggestionsUrl: path('agent/company-user/autocomplete'),
                        name: 'idCompanyUser',
                        value: data.impersonatedCustomer ? data.impersonatedCustomer.email : '',
                    },
                    attributes: {
                        'suggested-item-selector': '.company-user-list__container-item',
                        'value-data-attribute': 'data-value',
                        'query-string': 'pattern',
                        'auto-init': data.impersonatedCustomer ? true : false,
                    }
                } only %}
            </div>
        </div>
        <hr />
        <div class="col col--sm-12">
            <a class="button button button--hollow"
               href="{{ url('agent/quote-request') }}">
                {{ 'quote_request_page.quote_request.actions.back_to_list' | trans }}
            </a>

            <button type="submit" name="save" class="button button--success">
                {{ 'quote_request_page.quote_request.actions.save' | trans }}
            </button>
        </div>

        {{ form_end(data.quoteRequestCreateForm) }}
    </div>

{% endblock %}
